Требования к проекту

**Проект:** WatchWise
**Тип:** Web-платформа / Educational Technology (EdTech)
**Роль автора:** Fullstack-разработчик

## 1. Общее описание

Разработка интерактивной веб-платформы, трансформирующей пассивный просмотр образовательных видео (YouTube, VK Video) в активный процесс обучения. Система автоматически генерирует учебные материалы (конспекты, тесты, карточки) и внедряет механики «Умной паузы» непосредственно в видеоплеер, используя технологии искусственного интеллекта. Платформа предусматривает сценарии использования как для студентов (самообучение), так и для преподавателей (подготовка материалов).

## 2. Цели и Задачи ВКР

1.  **Архитектурное проектирование:** Реализация масштабируемого веб-приложения на базе Next.js с разделением ответственности (Modular Architecture).
2.  **Интеграция AI-пайплайна:** Разработка системы асинхронной обработки медиа-данных: извлечение аудиопотока, автоматическое распознавание речи (ASR) и генерация семантического контента (LLM).
3.  **Frontend-инженерия:** Создание сложного интерактивного интерфейса видеоплеера, синхронизированного с данными транскрипта и тестов.
4.  **Работа с данными:** Проектирование реляционной базы данных для хранения видеоконтента, сгенерированных материалов и результатов пользователей.

## 3. Функциональные требования (FR)

### 3.1. Аутентификация и Пользователи

- **Регистрация и Вход:** Использование email + пароль (реализация через NextAuth.js).
- **Сессии:** Безопасное хранение сессий и защита приватных маршрутов (Middleware).
- **Личный кабинет:** Доступ к истории обработанных видео и общей статистике успеваемости.

### 3.2. Обработка видео (Core Logic)

- **Ввод данных:** Валидация и парсинг ссылок на YouTube и VK Video.
- **Настройка генерации:** Перед запуском обработки пользователь может выбрать:
  - Сложность вопросов (Легко / Средне / Сложно).
  - Количество вопросов.
  - Режим генерации (Только конспект / Полный пакет).
- **Кэширование (Deduplication):** Система проверяет наличие видео в БД по URL/ID. Если видео уже обрабатывалось, используется сохраненный транскрипт, но AI-генерация материалов (тестов) может быть запущена заново с новыми параметрами.

### 3.3. Технический пайплайн обработки

- **VK Video:**
  1.  Загрузка аудиодорожки на сервер с помощью библиотек (`yt-dlp` wrapper / `play-dl`).
  2.  Отправка аудиофайла в Yandex SpeechKit (ASR API) для получения транскрипта с временными метками.
- **YouTube:**
  1.  Получение субтитров через специализированные парсеры (`youtube-captions-scraper`).
- **Генерация контента (AI):**
  1.  Отправка транскрипта в LLM (YandexGPT).
  2.  Получение структурированного JSON-ответа (Summary, Quiz questions with timestamps, Flashcards).

### 3.4. Режимы использования

- **Режим «Студент» (Просмотр и Обучение):**
  - **Конспект:** Отображение структурированного текста с навигацией по таймкодам.
  - **Умная пауза:** Автоматическая остановка плеера в момент вопроса.
  - **Интерактив:** Выбор варианта ответа. Мгновенная визуальная обратная связь (Правильно/Неправильно с показом верного ответа).
  - **Результат:** Отображение итоговой статистики (Score) после завершения видео.
- **Режим «Преподаватель» (Редактирование):**
  - Возможность просмотреть сгенерированные AI вопросы и ответы.
  - Редактирование текста вопросов, вариантов ответов и таймкодов перед сохранением в базу.
  - Ручное добавление или удаление флеш-карточек.

### 3.5. Сохранение прогресса

- Фиксация факта прохождения теста (Дата, Итоговый балл, ID видео).
- Отображение прогресса обучения на дашборде.

## 4. Нефункциональные требования (NFR)

### 4.1. Технологический стек

- **Frontend:** Next.js 15 (App Router), React, TypeScript.
- **Styling:** Tailwind CSS, shadcn/ui.
- **State Management (Client):** Zustand.
- **Backend:** Next.js API Routes (Serverless functions).
- **Database:** PostgreSQL.
- **ORM:** Prisma.
- **Infrastructure:** Docker & Docker Compose (для локального развертывания БД).
- **Разметка и SEO** Семантическая верстка элементов и улучшение SEO.

### 4.2. Производительность и UX

- **Асинхронность:** Длительные процессы (распознавание аудио) не должны блокировать интерфейс. Реализация индикации прогресса (Loading states / Skeletons).
- **Обработка ошибок:** Graceful degradation при недоступности внешних API (YouTube/Yandex). Пользователь должен получать понятные уведомления об ошибках.
- **Валидация:** Строгая валидация всех входных данных (Zod) на клиенте и сервере.

### 4.3. Интерфейс

- Адаптивный дизайн (Desktop First, корректное отображение на планшетах).
- Чистый, минималистичный UI с акцентом на видеоконтенте.
